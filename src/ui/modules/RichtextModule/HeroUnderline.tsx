'use client'

import { PortableTextMarkComponentProps } from 'next-sanity'
import './CustomPortableText.css'
import { useInView } from '@/lib/useInView'

const HeroUnderline = ({ children }: PortableTextMarkComponentProps<any>) => {
	const { isInView, ref } = useInView(1)
	return (
		<span ref={ref} className="relative inline-block">
			{children}
			<svg
				fill="none"
				viewBox={`0 0 272 16`}
				className="absolute top-full left-0 block w-full"
			>
				<mask id="draw-mask">
					<rect x="0" y="0" width="0" height="16" fill="white" id="mask-rect" />
				</mask>
				<path
					fillRule="evenodd"
					clipRule="evenodd"
					d="M15.462 11.6108C14.0961 11.7493 12.6541 11.878 12.1294 12.1738C13.4134 12.0195 14.9472 11.9165 15.462 11.6108ZM103.674 3.93636C109.969 3.77987 115.923 3.46015 122.064 3.22958C130.868 2.89865 139.656 2.55898 148.762 2.38025C154.356 2.27068 159.738 2.04182 165.412 1.96208C178.644 1.77635 191.771 1.52337 205.188 1.464C215.957 1.41642 226.694 1.34338 237.522 1.34894C247.122 1.35411 256.822 1.5137 266.504 1.64337C267.861 1.66146 269.247 1.70618 270.467 1.87254C270.391 2.10223 268.811 1.86569 268.716 2.06655C269.646 2.1966 271.731 2.0173 271.586 2.32557C271.467 2.57763 270.359 2.81654 268.381 2.85071C265.632 2.89815 262.841 2.72019 260.092 2.71705C247.898 2.70311 235.646 2.62279 223.577 2.74086C216.154 2.81347 208.632 2.82865 201.419 3.02871C197.421 3.13941 193.147 3.01549 189.305 3.20778C188.361 3.25495 187.195 3.18738 186.601 3.40152C186.38 3.48091 185.087 3.65385 184.274 3.31644C184.103 3.24525 183.457 3.29446 183.02 3.30459C178.292 3.414 173.311 3.41884 168.889 3.65094C164.585 3.87688 159.997 3.91719 155.639 4.096C152.56 4.22216 148.97 4.05381 145.853 4.2265C144.565 4.29758 143.128 4.30951 142.018 4.44996C141.5 4.45951 140.983 4.46929 140.465 4.47885C136.865 4.50058 133.402 4.5905 130.282 4.84877C126.497 4.87002 122.955 5.00562 119.68 5.26808C115.792 5.36419 111.878 5.43304 108.623 5.81658C107.271 5.97584 105.356 5.99433 103.742 6.09354C98.2474 6.43133 92.7845 6.78077 87.2825 7.11541C86.2645 7.17734 85.3195 7.31271 83.9786 7.19569C80.8633 7.24458 78.2029 7.45784 75.6975 7.72679C73.2361 8.0189 70.1684 8.10489 67.39 8.28482C63.8099 8.51681 60.3331 8.73887 57.3869 9.17355C54.9631 9.53115 51.5047 9.62942 48.673 9.90666C42.4851 10.5131 35.9395 11.0608 30.7834 11.885C25.1755 12.7814 18.103 13.3345 12.9707 14.324C11.662 14.5764 10.8033 14.9004 9.06984 15.0887C7.30269 15.2803 3.74815 15.2132 1.70235 14.8243C0.0290639 14.5062 -0.504005 14.1252 0.628063 13.7647C2.5677 13.1475 5.04558 12.6113 7.727 12.1117C19.2648 9.96235 33.1206 8.34383 47.9811 6.96416C62.4981 5.6162 77.82 4.53482 93.7784 3.67059C101.901 3.23082 110.303 2.91923 118.639 2.57484C127.217 2.22051 135.831 1.88942 144.668 1.67239C152.537 1.47917 160.503 1.34419 168.455 1.20256C177.768 1.03638 187.108 0.894255 196.536 0.827327C219.15 0.666774 241.851 0.583054 265.088 1.13014C266.655 1.16703 268.324 1.03536 269.973 1.34556C268.707 1.55618 267.05 1.522 265.422 1.4872C253.505 1.23135 241.73 1.15117 229.951 1.11725C212.59 1.06707 195.625 1.32459 178.546 1.48994C170.285 1.5699 162.252 1.82409 154.072 1.96973C143.339 2.16042 132.914 2.519 122.518 2.88732C116.3 3.10761 110.127 3.36816 104.323 3.77414C103.901 3.80372 103.561 3.84154 103.714 3.94666C102.281 3.81138 101.247 3.95553 100.123 4.01129C91.3729 4.44593 82.8395 4.96312 74.3896 5.51355C69.0858 5.85916 64.0007 6.27701 58.7674 6.64541C53.2594 7.03296 48.1419 7.56285 43.1027 8.09578C41.6752 8.24665 39.2747 8.24943 39.0867 8.6812C36.1685 8.62897 34.9153 9.01609 33.2562 9.29528C35.3404 9.1276 37.4529 8.96689 39.0322 8.66787C39.5947 8.63383 40.2118 8.61457 40.7128 8.56369C55.5054 7.0529 71.2413 5.84272 87.7129 4.86763C93.0228 4.55315 98.3527 4.24664 103.674 3.93636Z"
					fill="#230903"
					fillOpacity="0.6"
					mask={isInView ? 'url(#draw-mask)' : ''}
				/>
			</svg>
		</span>
	)
}

export default HeroUnderline
